# Whisper ì „ì‚¬ ê¸°ëŠ¥ ì‚¬ìš© ê°€ì´ë“œ

## ğŸ¤ ê°œìš”

Whisper AIë¥¼ ì‚¬ìš©í•˜ì—¬ ì—…ë¡œë“œëœ ë…¹ìŒ íŒŒì¼ì„ í…ìŠ¤íŠ¸ë¡œ ë³€í™˜í•˜ëŠ” ê¸°ëŠ¥ì…ë‹ˆë‹¤.

## âœ¨ ì£¼ìš” ê¸°ëŠ¥

### 1. ê°œë³„ ì „ì‚¬
- ê° ë…¹ìŒë§ˆë‹¤ "ğŸ¤ ì „ì‚¬" ë²„íŠ¼ ì œê³µ
- í´ë¦­ ì‹œ í•´ë‹¹ ë…¹ìŒë§Œ ì „ì‚¬
- ì „ì‚¬ ì™„ë£Œ í›„ ê²°ê³¼ ì¦‰ì‹œ í‘œì‹œ

### 2. ì¼ê´„ ì „ì‚¬
- "ğŸ¤ ëª¨ë“  ë…¹ìŒ ì „ì‚¬í•˜ê¸°" ë²„íŠ¼ìœ¼ë¡œ ëª¨ë“  ë…¹ìŒ ì¼ê´„ ì²˜ë¦¬
- ìˆœì°¨ì ìœ¼ë¡œ ì „ì‚¬ ì§„í–‰
- ì§„í–‰ ìƒí™© ì‹¤ì‹œê°„ í™•ì¸ ê°€ëŠ¥

### 3. ê²°ê³¼ í‘œì‹œ
- âœ… ì „ì‚¬ ì™„ë£Œ ì‹œ: ë…¹ìƒ‰ ë°°ê²½ì˜ ê²°ê³¼ ë°•ìŠ¤
- âŒ ì „ì‚¬ ì‹¤íŒ¨ ì‹œ: ë¹¨ê°„ìƒ‰ ë°°ê²½ì˜ ì˜¤ë¥˜ ë©”ì‹œì§€
- ğŸ”„ ì „ì‚¬ ì¤‘: ë²„íŠ¼ ë¹„í™œì„±í™” ë° "ì „ì‚¬ ì¤‘..." í‘œì‹œ

## ğŸ“‹ ì‚¬ìš© ë°©ë²•

### CompletionPageì—ì„œ ì „ì‚¬í•˜ê¸°

#### ë°©ë²• 1: ê°œë³„ ì „ì‚¬
```
1. CompletionPageë¡œ ì´ë™ (ëª¨ë“  ë…¹ìŒ ì™„ë£Œ í›„)
2. ë…¹ìŒ ëª©ë¡ì—ì„œ ì›í•˜ëŠ” ë…¹ìŒì˜ "ğŸ¤ ì „ì‚¬" ë²„íŠ¼ í´ë¦­
3. ì „ì‚¬ ì™„ë£Œ ì‹œ ê²°ê³¼ í‘œì‹œ:
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ ë‹¨ì–´ 1: ì‚¬ê³¼                        â”‚
   â”‚ ID: 123                    ğŸ¤ ì „ì‚¬  â”‚
   â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
   â”‚ ì „ì‚¬ ê²°ê³¼: ì‚¬ê³¼                     â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### ë°©ë²• 2: ì „ì²´ ì¼ê´„ ì „ì‚¬
```
1. "ğŸ¤ ëª¨ë“  ë…¹ìŒ ì „ì‚¬í•˜ê¸°" ë²„íŠ¼ í´ë¦­
2. ëª¨ë“  ë…¹ìŒì´ ìˆœì°¨ì ìœ¼ë¡œ ì „ì‚¬ë¨
3. ì§„í–‰ ì¤‘: "ğŸ”„ ì „ì‚¬ ì¤‘..." í‘œì‹œ
4. ì™„ë£Œ í›„ ëª¨ë“  ê²°ê³¼ í‘œì‹œ
```

## ğŸ¯ ì „ì‚¬ ê²°ê³¼ ì˜ˆì‹œ

### ì„±ê³µ ì¼€ì´ìŠ¤
```
ë…¹ìŒ: "ì‚¬ê³¼"
ì „ì‚¬ ê²°ê³¼: ì‚¬ê³¼
```

```
ë…¹ìŒ: "ë‚˜ëŠ” í•™êµì— ê°‘ë‹ˆë‹¤"
ì „ì‚¬ ê²°ê³¼: ë‚˜ëŠ” í•™êµì— ê°‘ë‹ˆë‹¤
```

### ì˜¤ë¥˜ ì¼€ì´ìŠ¤
```
âŒ ì˜¤ë¥˜: Network Error
âŒ ì˜¤ë¥˜: Recording not found
âŒ ì˜¤ë¥˜: Whisper API error
```

## ğŸ”§ ê¸°ìˆ  êµ¬í˜„

### API ì—”ë“œí¬ì¸íŠ¸
```javascript
POST /api/recordings/{id}/transcribe/

ì‘ë‹µ:
{
  "id": 123,
  "transcription": "ì‚¬ê³¼",
  "confidence": 0.98,
  "language": "ko"
}
```

### í”„ë¡ íŠ¸ì—”ë“œ í•¨ìˆ˜
```javascript
// ë‹¨ì¼ ì „ì‚¬
const handleTranscribe = async (recordingId) => {
  const result = await transcribeRecording(recordingId);
  setTranscriptions(prev => ({
    ...prev,
    [recordingId]: result.transcription
  }));
};

// ì¼ê´„ ì „ì‚¬
const handleTranscribeAll = async () => {
  for (const recordingId of allRecordingIds) {
    await transcribeRecording(recordingId);
    // 0.5ì´ˆ ë”œë ˆì´ (ì„œë²„ ë¶€í•˜ ë°©ì§€)
    await new Promise(resolve => setTimeout(resolve, 500));
  }
};
```

### ìƒíƒœ ê´€ë¦¬
```javascript
const [transcribing, setTranscribing] = useState(false);
const [transcriptions, setTranscriptions] = useState({});
const [transcriptionErrors, setTranscriptionErrors] = useState({});
```

## ğŸ“Š UI êµ¬ì„±

### ì „ì‚¬ ë²„íŠ¼
```css
.transcribe-button {
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  color: white;
  border-radius: 6px;
  padding: 6px 12px;
}
```

### ì „ì‚¬ ê²°ê³¼ ë°•ìŠ¤
```css
.transcription-result {
  background: #e8f5e9;        /* ì—°í•œ ë…¹ìƒ‰ */
  border-left: 3px solid #4CAF50;
  padding: 10px;
}
```

### ì˜¤ë¥˜ ë°•ìŠ¤
```css
.transcription-error {
  background: #ffebee;        /* ì—°í•œ ë¹¨ê°„ìƒ‰ */
  border-left: 3px solid #f44336;
  padding: 10px;
}
```

## âš ï¸ ì£¼ì˜ì‚¬í•­

### 1. ì„œë²„ ëª¨ë“œì—ì„œë§Œ ì‚¬ìš© ê°€ëŠ¥
```javascript
// ë¡œì»¬ ëª¨ë“œì—ì„œëŠ” ì „ì‚¬ ë¶ˆê°€
if (!sessionId) {
  alert('ë¡œì»¬ ëª¨ë“œì—ì„œëŠ” ì „ì‚¬ë¥¼ ì‚¬ìš©í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.');
  return;
}
```

### 2. íƒ€ì„ì•„ì›ƒ ì„¤ì •
```javascript
// Whisper ì²˜ë¦¬ëŠ” ì‹œê°„ì´ ê±¸ë¦´ ìˆ˜ ìˆìœ¼ë¯€ë¡œ íƒ€ì„ì•„ì›ƒ 2ë¶„
timeout: 120000  // 120ì´ˆ
```

### 3. ì„œë²„ ë¶€í•˜ ê´€ë¦¬
```javascript
// ì¼ê´„ ì „ì‚¬ ì‹œ 0.5ì´ˆ ë”œë ˆì´
await new Promise(resolve => setTimeout(resolve, 500));
```

## ğŸ› ë¬¸ì œ í•´ê²°

### ë¬¸ì œ 1: "ë¡œì»¬ ëª¨ë“œì—ì„œëŠ” ì „ì‚¬ë¥¼ ì‚¬ìš©í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤"
**ì›ì¸**: ì„¸ì…˜ IDê°€ ì—†ìŒ (ì„œë²„ ì—°ê²° ì‹¤íŒ¨)
**í•´ê²°**: 
1. Django ì„œë²„ê°€ ì‹¤í–‰ ì¤‘ì¸ì§€ í™•ì¸
2. InstructionPageì—ì„œ ì„¸ì…˜ ìƒì„± ì„±ê³µ í™•ì¸
3. ë„¤íŠ¸ì›Œí¬ ì—°ê²° í™•ì¸

### ë¬¸ì œ 2: "Network Error"
**ì›ì¸**: ì„œë²„ ì—°ê²° ì‹¤íŒ¨
**í•´ê²°**:
1. ì„œë²„ ì£¼ì†Œ í™•ì¸: `http://210.125.93.241:8020`
2. CORS ì„¤ì • í™•ì¸
3. ë°©í™”ë²½ ì„¤ì • í™•ì¸

### ë¬¸ì œ 3: "Timeout Error"
**ì›ì¸**: Whisper ì²˜ë¦¬ ì‹œê°„ ì´ˆê³¼ (2ë¶„ ì´ìƒ)
**í•´ê²°**:
1. ë…¹ìŒ íŒŒì¼ì´ ë„ˆë¬´ í¬ì§€ ì•Šì€ì§€ í™•ì¸
2. ì„œë²„ ë¦¬ì†ŒìŠ¤ í™•ì¸ (CPU, ë©”ëª¨ë¦¬)
3. Whisper ëª¨ë¸ ìµœì í™” í•„ìš”

### ë¬¸ì œ 4: ì „ì‚¬ ê²°ê³¼ê°€ ë¶€ì •í™•
**ì›ì¸**: 
- ìŒì§ˆì´ ì¢‹ì§€ ì•ŠìŒ
- ë°°ê²½ ì†ŒìŒì´ ë§ìŒ
- ë°œìŒì´ ë¶ˆëª…í™•í•¨

**í•´ê²°**:
1. ì¡°ìš©í•œ í™˜ê²½ì—ì„œ ë…¹ìŒ
2. ë§ˆì´í¬ì™€ ì ì ˆí•œ ê±°ë¦¬ ìœ ì§€ (30cm)
3. ë˜ë°•ë˜ë°• ë°œìŒ
4. ì¬ë…¹ìŒ ì‹œë„

## ğŸ“ˆ ì„±ëŠ¥ ìµœì í™”

### 1. ìºì‹±
```javascript
// ì´ë¯¸ ì „ì‚¬ëœ ë…¹ìŒì€ ë‹¤ì‹œ ì „ì‚¬í•˜ì§€ ì•ŠìŒ
disabled={transcribing || transcriptions[rec.id]}
```

### 2. ìˆœì°¨ ì²˜ë¦¬
```javascript
// Promise.all ëŒ€ì‹  for loop ì‚¬ìš© (ì„œë²„ ë¶€í•˜ ë°©ì§€)
for (const recordingId of allRecordingIds) {
  await transcribeRecording(recordingId);
}
```

### 3. ì—ëŸ¬ ê²©ë¦¬
```javascript
// í•˜ë‚˜ì˜ ì „ì‚¬ ì‹¤íŒ¨ê°€ ë‹¤ë¥¸ ì „ì‚¬ì— ì˜í–¥ ì—†ìŒ
try {
  await transcribeRecording(recordingId);
} catch (error) {
  // ì˜¤ë¥˜ ì €ì¥í•˜ê³  ê³„ì† ì§„í–‰
  setTranscriptionErrors(prev => ({...prev, [recordingId]: error}));
}
```

## ğŸ”® í–¥í›„ ê°œì„  ì‚¬í•­

### Phase 1 (í˜„ì¬)
- âœ… ê°œë³„ ì „ì‚¬ ê¸°ëŠ¥
- âœ… ì¼ê´„ ì „ì‚¬ ê¸°ëŠ¥
- âœ… ê²°ê³¼ í‘œì‹œ
- âœ… ì˜¤ë¥˜ ì²˜ë¦¬

### Phase 2 (ê³„íš)
- ğŸ“ ì „ì‚¬ ì§„í–‰ë¥  í‘œì‹œ (x/14 ì™„ë£Œ)
- ğŸ“ ì „ì‚¬ ì·¨ì†Œ ê¸°ëŠ¥
- ğŸ“ ì „ì‚¬ ê²°ê³¼ í¸ì§‘ ê¸°ëŠ¥
- ğŸ“ ì „ì‚¬ ê²°ê³¼ ë‹¤ìš´ë¡œë“œ

### Phase 3 (ê³„íš)
- ğŸ“ ì‹¤ì‹œê°„ ì „ì‚¬ (ë…¹ìŒ ì¤‘)
- ğŸ“ ë‹¤êµ­ì–´ ì „ì‚¬ ì§€ì›
- ğŸ“ í™”ì ë¶„ë¦¬ (ì—¬ëŸ¬ ì‚¬ëŒ)
- ğŸ“ íƒ€ì„ìŠ¤íƒ¬í”„ í‘œì‹œ

## ğŸ“ Django ì„œë²„ êµ¬í˜„ ì˜ˆì‹œ

```python
# views.py
from rest_framework import viewsets
from rest_framework.decorators import action
from rest_framework.response import Response
import whisper

class RecordingViewSet(viewsets.ModelViewSet):
    
    @action(detail=True, methods=['post'])
    def transcribe(self, request, pk=None):
        """ë…¹ìŒ íŒŒì¼ ì „ì‚¬ (Whisper)"""
        recording = self.get_object()
        
        try:
            # Whisper ëª¨ë¸ ë¡œë“œ
            model = whisper.load_model("base")
            
            # ì˜¤ë””ì˜¤ íŒŒì¼ ì „ì‚¬
            result = model.transcribe(
                recording.audio_file.path,
                language='ko'
            )
            
            # ì „ì‚¬ ê²°ê³¼ ì €ì¥
            recording.transcription = result['text']
            recording.save()
            
            return Response({
                'id': recording.id,
                'transcription': result['text'],
                'confidence': result.get('confidence', 0),
                'language': 'ko'
            })
            
        except Exception as e:
            return Response(
                {'error': str(e)},
                status=500
            )
```

## ğŸ¯ í…ŒìŠ¤íŠ¸ ì‹œë‚˜ë¦¬ì˜¤

### ì‹œë‚˜ë¦¬ì˜¤ 1: ì •ìƒ íë¦„
```
1. ë…¹ìŒ ì™„ë£Œ â†’ CompletionPage
2. "ğŸ¤ ëª¨ë“  ë…¹ìŒ ì „ì‚¬í•˜ê¸°" í´ë¦­
3. ì§„í–‰ ìƒíƒœ í‘œì‹œ: "ğŸ”„ ì „ì‚¬ ì¤‘..."
4. ê° ë…¹ìŒ ìˆœì°¨ì ìœ¼ë¡œ ì „ì‚¬
5. ê²°ê³¼ í‘œì‹œ: "ì „ì‚¬ ê²°ê³¼: [í…ìŠ¤íŠ¸]"
6. ëª¨ë“  ì „ì‚¬ ì™„ë£Œ
```

### ì‹œë‚˜ë¦¬ì˜¤ 2: ê°œë³„ ì „ì‚¬
```
1. íŠ¹ì • ë…¹ìŒì˜ "ğŸ¤ ì „ì‚¬" ë²„íŠ¼ í´ë¦­
2. í•´ë‹¹ ë…¹ìŒë§Œ ì „ì‚¬
3. ê²°ê³¼ ì¦‰ì‹œ í‘œì‹œ
4. ë‹¤ë¥¸ ë…¹ìŒì€ ê°œë³„ì ìœ¼ë¡œ ì „ì‚¬ ê°€ëŠ¥
```

### ì‹œë‚˜ë¦¬ì˜¤ 3: ì˜¤ë¥˜ ì²˜ë¦¬
```
1. ì „ì‚¬ ì‹œì‘
2. ë„¤íŠ¸ì›Œí¬ ì˜¤ë¥˜ ë°œìƒ
3. ì˜¤ë¥˜ ë©”ì‹œì§€ í‘œì‹œ: "âŒ ì˜¤ë¥˜: Network Error"
4. ë‹¤ë¥¸ ë…¹ìŒì€ ê³„ì† ì „ì‚¬ ê°€ëŠ¥
```

## ğŸ“ ë¬¸ì˜

ì „ì‚¬ ê¸°ëŠ¥ ê´€ë ¨ ë¬¸ì˜:
- ê¸°ìˆ  ì§€ì›: ì´ìŠˆ íŠ¸ë˜ì»¤
- ë²„ê·¸ ë¦¬í¬íŠ¸: GitHub Issues

---

**ì‘ì„±ì¼**: 2025ë…„ 10ì›” 22ì¼  
**ë²„ì „**: 1.0.0  
**ìƒíƒœ**: ê°œë°œ ì™„ë£Œ, ì„œë²„ í†µí•© ëŒ€ê¸°
